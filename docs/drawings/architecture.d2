# QR Code Utils Architecture

direction: right

title: {
  label: QR Code Utils v1.0 - System Architecture
  near: top-center
  shape: text
  style.font-size: 24
  style.bold: true
}

user: User {
  shape: person
  style.fill: "#e1f5ff"
}

cli: CLI Interface {
  main: main.py {
    label: "main.py\nArgument Parser\nCLI Entry Point"
    shape: rectangle
    style.fill: "#c8e6c9"
  }

  qr_utils: qr-utils.sh {
    label: "qr-utils.sh\nShell Wrapper"
    shape: rectangle
    style.fill: "#c8e6c9"
  }
}

common: Common Modules {
  config: Config {
    label: "Config Manager\n- ~/qr-utils/ directory\n- settings.json\n- output/logs paths"
    shape: rectangle
    style.fill: "#fff9c4"
  }

  logger: Logger {
    label: "Logger Setup\n- File logging\n- Console output\n- Colored output"
    shape: rectangle
    style.fill: "#fff9c4"
  }

  style.fill: "#fffde7"
}

core: QR Generator Core {
  base: BaseQRGenerator {
    label: "BaseQRGenerator\n(Abstract Base Class)\n\n+ prepare_data()\n+ create_qr_code()\n+ add_logo()\n+ generate()"
    shape: diamond
    style.fill: "#f8bbd0"
  }

  generators: 11 Specific Generators {
    url: "URLQRGenerator"
    vcard: "VCardQRGenerator"
    wifi: "WiFiQRGenerator"
    sms: "SMSQRGenerator"
    email: "EmailQRGenerator"
    phone: "PhoneQRGenerator"
    text: "TextQRGenerator"
    location: "LocationQRGenerator"
    event: "EventQRGenerator"
    whatsapp: "WhatsAppQRGenerator"
    payment: "PaymentQRGenerator"

    style.fill: "#d1c4e9"
  }

  style.fill: "#ede7f6"
}

storage: File System {
  home: "~/qr-utils/" {
    config_file: settings.json
    logs: "logs/"
    output: "output/"

    style.fill: "#ffccbc"
  }

  style.fill: "#ffecb3"
}

libs: External Libraries {
  qrcode: qrcode {
    label: "qrcode\nQR generation"
    shape: hexagon
  }
  pil: Pillow (PIL) {
    label: "Pillow\nImage processing"
    shape: hexagon
  }

  style.fill: "#b2dfdb"
}

# Connections
user -> cli.qr_utils: "Execute ./qr-utils.sh"
cli.qr_utils -> cli.main: "Run Python script"
cli.main -> common.config: "Load configuration"
cli.main -> common.logger: "Setup logging"
cli.main -> core.base: "Select generator"
core.base -> core.generators: "Instantiate specific"
core.generators -> libs.qrcode: "Generate QR code"
core.generators -> libs.pil: "Process image + logo"
core.generators -> storage.home.output: "Save QR image"
common.config -> storage.home.config_file: "Read/Write settings"
common.logger -> storage.home.logs: "Write logs"

core.generators -> storage.home.output: "Save QR codes"

main -> storage.home.output: "Return path"
storage.home.output -> user: "QR code file"
